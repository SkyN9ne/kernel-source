From: Takashi Iwai <tiwai@suse.de>
Subject: ath10k kABI workaround for CVE-2020-24588 fix
Patch-mainline: Never, kABI workaround
References: CVE-2020-24588 bsc#1185861

Revert back to the direct field for __GENKSYMS__ instead of union.
The data compatiblity is assured in anyway.

Signed-off-by: Takashi Iwai <tiwai@suse.de>

---
 drivers/net/wireless/ath/ath10k/rx_desc.h |    4 ++++
 1 file changed, 4 insertions(+)

--- a/drivers/net/wireless/ath/ath10k/rx_desc.h
+++ b/drivers/net/wireless/ath/ath10k/rx_desc.h
@@ -1282,6 +1282,9 @@ struct fw_rx_desc_base {
 #define FW_RX_DESC_UDP              (1 << 6)
 
 struct fw_rx_desc_hl {
+#ifdef __GENKSYMS__
+	u8 info0;
+#else
 	union {
 		struct {
 		u8 discard:1,
@@ -1294,6 +1297,7 @@ struct fw_rx_desc_hl {
 		} bits;
 		u8 info0;
 	} u;
+#endif
 
 	u8 version;
 	u8 len;
