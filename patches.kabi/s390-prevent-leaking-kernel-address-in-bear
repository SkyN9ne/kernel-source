From: Petr Tesarik <ptesarik@suse.com>
Subject: s390: Keep kABI after adding fields to struct lowcore
References: git-fixes
Patch-mainline: never, kABI fix

Mask new struct lowcore fields added into padding by
patches.suse/s390-prevent-leaking-kernel-address-in-bear.

Signed-off-by: Petr Tesarik <ptesarik@suse.com>
---
 arch/s390/include/asm/lowcore.h |    4 ++++
 1 file changed, 4 insertions(+)

--- a/arch/s390/include/asm/lowcore.h
+++ b/arch/s390/include/asm/lowcore.h
@@ -141,9 +141,13 @@ struct lowcore {
 
 	/* br %r1 trampoline */
 	__u16	br_r1_trampoline;		/* 0x0400 */
+#ifndef __GENKSYMS__
 	__u32	return_lpswe;			/* 0x0402 */
 	__u32	return_mcck_lpswe;		/* 0x0406 */
 	__u8	pad_0x040a[0x0e00-0x040a];	/* 0x040a */
+#else
+	__u8	pad_0x0402[0x0e00-0x0402];	/* 0x0402 */
+#endif
 
 	/*
 	 * 0xe00 contains the address of the IPL Parameter Information
