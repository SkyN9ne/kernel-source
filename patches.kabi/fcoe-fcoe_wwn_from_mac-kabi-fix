From: Lee Duncan <lduncan@suse.com>
Subject: FCOE: fcoe_wwn_from_mac kABI fix
Date: Wed Jun 30 13:42:59 PDT 2021
Patch-mainline: Never, kABI workaround
References: bsc#1187886

The patch patches.suse/scsi-fcoe-fix-mismatched-fcoe_wwn_from_mac-declaration
changed the kABI for fcoe_wwn_from_mac by adding a limit to the size
of the array of characters passed in as the first argument. This changes
no functionality, but gcc didn't like it being empty, and kABI doesn't
like it changing, so mask it out for the kABI check.

Signed-off-by: Lee Duncan <lduncan@suse.com>
---
 include/scsi/libfcoe.h |    4 ++++
 1 file changed, 4 insertions(+)

--- a/include/scsi/libfcoe.h
+++ b/include/scsi/libfcoe.h
@@ -260,7 +260,11 @@ int fcoe_ctlr_recv_flogi(struct fcoe_ctl
 			 struct fc_frame *);
 
 /* libfcoe funcs */
+#ifndef __GENKSYMS__
 u64 fcoe_wwn_from_mac(unsigned char mac[MAX_ADDR_LEN], unsigned int, unsigned int);
+#else
+u64 fcoe_wwn_from_mac(unsigned char mac[], unsigned int, unsigned int);
+#endif
 int fcoe_libfc_config(struct fc_lport *, struct fcoe_ctlr *,
 		      const struct libfc_function_template *, int init_fcp);
 u32 fcoe_fc_crc(struct fc_frame *fp);
