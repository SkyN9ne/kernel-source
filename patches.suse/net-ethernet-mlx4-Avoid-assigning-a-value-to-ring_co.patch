From: Luo Jiaxing <luojiaxing@huawei.com>
Date: Sat, 12 Sep 2020 16:08:15 +0800
Subject: net: ethernet: mlx4: Avoid assigning a value to ring_cons but not
 used it anymore in mlx4_en_xmit()
Patch-mainline: v5.10-rc1
Git-commit: e5e252ba21d243689a8e8bf2af5bf5579dabfea7
References: git-fixes

We found a set but not used variable 'ring_cons' in mlx4_en_xmit(), it will
cause a warning when build the kernel. And after checking the commit record
of this function, we found that it was introduced by a previous patch.

So, We delete this redundant assignment code.

Fixes: 488a9b48e398 ("net/mlx4_en: Wake TX queues only when there's enough room")

Signed-off-by: Luo Jiaxing <luojiaxing@huawei.com>
Signed-off-by: David S. Miller <davem@davemloft.net>
Acked-by: Thomas Bogendoerfer <tbogendoerfer@suse.de>
---
 drivers/net/ethernet/mellanox/mlx4/en_tx.c |    1 -
 1 file changed, 1 deletion(-)

--- a/drivers/net/ethernet/mellanox/mlx4/en_tx.c
+++ b/drivers/net/ethernet/mellanox/mlx4/en_tx.c
@@ -1081,7 +1081,6 @@ netdev_tx_t mlx4_en_xmit(struct sk_buff
 		 */
 		smp_rmb();
 
-		ring_cons = READ_ONCE(ring->cons);
 		if (unlikely(!mlx4_en_is_tx_ring_full(ring))) {
 			netif_tx_wake_queue(ring->tx_queue);
 			ring->wake_queue++;
